# Makefile generated by imake - do not edit!
# $Xorg: imake.c,v 1.6 2001/02/09 02:03:15 xorgcvs Exp $

#
#
#

# ====================================================================
#
#  Included macros and rules from <Imake.cf> and <Imake.rules>
#
# ====================================================================

PWD        = /home/weber/psd_ksfoundation/ksgre_tutorial/host
TOP        = /ESE_RX27.0_R03
OS_NAME    = Linux
OS_RELEASE = 2_6_32__696_16_1_el6_x86_64

SHELL = /bin/sh

BASENAME = /bin/basename
CAT      = /bin/cat
CHMOD    = /bin/chmod
CP       = /bin/cp
CUT      = /usr/bin/cut
DD       = /bin/dd
GREP     = /bin/grep
MV       = /bin/mv
RM       = /bin/rm -f
SED      = /bin/sed
SORT     = /bin/sort
TAIL     = /usr/bin/tail
TAR      = /bin/tar
TOUCH    = /bin/touch

# ====================================================================

#
#
#
#
#
#

# ====================================================================
#
#  Common targets found in all makefiles
#
# ====================================================================

# --------------------------------------------------------------------
#
#  Rule: "CommonTargets()"
#

all:: hw sim

clean::

hw::

hw-ice::

hw-mgd::

install::

sim::

test::

# --------------------------------------------------------------------

# ====================================================================

#
#
#
#
#
#

# ====================================================================
#
#  Beginning of included template file: "GCC.tmpl"
#
# ====================================================================

#
# These are parameter definitions common to all users who use the
#    GCC compiler set.
#

AR      = $(GE_CCTOP)/bin/ar
CC      = $(GE_CCTOP)/bin/gcc
CPP     = $(GE_CCTOP)/bin/cpp
CXX     = $(GE_CCTOP)/bin/g++
FC      = $(GE_CCTOP)/bin/gfortran
LD      = $(GE_CCTOP)/bin/ld
NM      = $(GE_CCTOP)/bin/nm
OBJCOPY = $(GE_CCTOP)/bin/objcopy
STRIP   = $(GE_CCTOP)/bin/strip

STD_COMPILE_FLAGS =     $(ENV_GCC_CPPFLAGS)     $(HW_OPTIONS)     -g     $(WARNING_ERROR_FLAG)     -Wall

DEFAULT_CFLAGS =     $(STD_COMPILE_FLAGS)

DEFAULT_CXXFLAGS =     $(STD_COMPILE_FLAGS)

DEFAULT_FFLAGS =     $(STD_COMPILE_FLAGS)

DEFAULT_OBJCPPFLAGS =     $(STD_COMPILE_FLAGS)     -U__GNUC__     -DUSE_STDARG     -DALLC

DEFAULT_SO_CFLAGS =     -fpic

DEFAULT_SO_CXXFLAGS =     -fpic

DEFAULT_LDFLAGS1 =     $(ENV_GCC_LDFLAGS)     $(HW_OPTIONS)

DEFAULT_LDFLAGS2 =

DEFAULT_ARFLAGS = crs

DEFAULT_CXXARFLAGS = -ar -WR,-v -o

HW32_OPTIONS =     -m32

HW64_OPTIONS =     -m64

# Global compiler flag concering warnings.  By default we don't treat
# warnings as errors.  Add -Werror to cause build errors on warnings.

WARNING_ERROR_FLAG =

#
# End common GCC parameter definitions.
#

CFLAGS1_TS   = \
	       $(ADD_CFLAGS_TS) \
	       $(PSD_INCLUDES)

CFLAGS2_TS   = \
	       $(PSD_FLAGS) \
	       $(SIM_FLAGS) \
	       -DMGD_TGT \
	       -DMGD \
	       -DIPG \
	       -DIPGHWTGT

CXXFLAGS1_HH  = $(CFLAGS1_HH)

CXXFLAGS2_HH  = $(CFLAGS2_HH)

CXXFLAGS1_TS  = $(CFLAGS1_TS)

CXXFLAGS2_TS  = $(CFLAGS2_TS)

XLATE  = $(TOP)/3p/xlate/nios1/xlatenios1
PIFF2HEX  = $(TOP)/3p/xlate/piff/piff2hexout
BINSUM  = $(TOP)/3p/xlate/binsum/binsum
ICE_PCIE_EEPROM_XLATE = $(TOP)/embedded/ice/pci/eeprom/sim_linux/pciEepromXlate

# --------------------------------------------------------------------
#
#  Rule: "SuffixRules()"
#

.SUFFIXES:
.SUFFIXES: .c .cc .cpp .cxx .f .m .mi .o

SUFFIX_CFLAGS = $(SO_CFLAGS) $(CFLAGS1) $(DEFAULT_CFLAGS) $(CFLAGS2)

SUFFIX_CXXFLAGS = $(SO_CXXFLAGS) $(CXXFLAGS1) $(DEFAULT_CXXFLAGS) \
	$(CXXFLAGS2)

SUFFIX_FFLAGS = $(FFLAGS1) $(DEFAULT_FFLAGS) $(FFLAGS2)

SUFFIX_OBJCPPFLAGS = $(CPPFLAGS1) $(DEFAULT_OBJCPPFLAGS) $(CPPFLAGS2)

.c.o:
	$(RM) ${@F}
	 $(CC) -c -o ${@F} $< $(SUFFIX_CFLAGS) \
		-UIMAKE_GCC_SUFFIXRULES

.cc.o:
	$(RM) ${@F}
	 $(CXX) -c -o ${@F} $< $(SUFFIX_CXXFLAGS) \
		-UIMAKE_GCC_SUFFIXRULES

.cpp.o:
	$(RM) ${@F}
	 $(CXX) -c -o ${@F} $< $(SUFFIX_CXXFLAGS) \
		-UIMAKE_GCC_SUFFIXRULES

.cxx.o:
	$(RM) ${@F}
	 $(CXX) -c -o ${@F} $< $(SUFFIX_CXXFLAGS) \
		-UIMAKE_GCC_SUFFIXRULES

.f.o:
	$(RM) ${@F}
	$(FC) -c -o ${@F} $< $(SUFFIX_FFLAGS) -UIMAKE_GCC_SUFFIXRULES

.m.mi:
	$(RM) ${@F}
	$(CPP) -o ${@F} $< $(SUFFIX_OBJCPPFLAGS) -UIMAKE_GCC_SUFFIXRULES

clean::
	-$(RM) *.mi *.o

# --------------------------------------------------------------------

# ====================================================================
#
#  End of included template file: "GCC.tmpl"
#
# ====================================================================

#
#
#
#
#
#

# ====================================================================
#
#  Local Imakefile begins here
#
# ====================================================================

TOOLSET = HOST_C

GITREV = 0000aaa
CLINICAL_MODE = 0
-include ../psd_config.mk
-include psd_config.mk

TMP01 = $(patsubst /ESE_HD%_V01,%,        $(TOP))
TMP02 = $(patsubst /ESE_DV%_VO1,%,        $(TMP01))
TMP03 = $(patsubst /ESE_DV%_VO2,%,        $(TMP02))
TMP04 = $(patsubst /ESE_DV%_0_V01,%,      $(TMP03))
TMP05 = $(patsubst /ESE_DV%.0_V01,%,      $(TMP04))
TMP06 = $(patsubst /ESE_DV%_1_V02,%,      $(TMP05))
TMP07 = $(patsubst /ESE_DV%.0_EA,%,       $(TMP06))
TMP08 = $(patsubst /ESE_DV%.0_EB,%,       $(TMP07))
TMP09 = $(patsubst /ESE_DV%.0_R01,%,      $(TMP08))
TMP10 = $(patsubst /ESE_DV%.0_R02,%,      $(TMP09))
TMP11 = $(patsubst /ESE_DV%.1_R01,%,      $(TMP10))
TMP12 = $(patsubst /ESE_DV%.1_R02,%,      $(TMP11))
TMP13 = $(patsubst /ESE_MP%.0_EA,%,       $(TMP12))
TMP14 = $(patsubst /ESE_MP%.0_R01,%,      $(TMP13))
TMP15 = $(patsubst /ESE_MP%.0_R02,%,      $(TMP14))
TMP16 = $(patsubst /ESE_RX%.0_EB,%,       $(TMP15))
TMP17 = $(patsubst /ESE_PX%.1_R01,%,      $(TMP16))
TMP18 = $(patsubst /ESE_RX%.0_R01,%,      $(TMP17))
TMP19 = $(patsubst /ESE_RX%.0_R02,%,      $(TMP18))
RELEASE_NUM = $(patsubst /ESE_RX%.0_R03,%, $(TMP19))

PATCHTMP01 = $(patsubst /ESE_DV24_0_V0%,%, $(TOP))
PATCHTMP02 = $(patsubst /ESE_DV24.0_R0%,%, $(PATCHTMP01))
PATCHTMP03 = $(patsubst /ESE_DV25.0_R0%,%, $(PATCHTMP02))
PATCHTMP04 = $(patsubst /ESE_DV25.1_R0%,%, $(PATCHTMP03))
PATCHTMP05 = $(patsubst /ESE_DV26.0_R0%,%, $(PATCHTMP04))
PATCHTMP06 = $(patsubst /ESE_MP24.0_R0%,%, $(PATCHTMP05))
PATCHTMP07 = $(patsubst /ESE_MP26.0_R0%,%, $(PATCHTMP06))
PATCHTMP08 = $(patsubst /ESE_PX26.1_R0%,%, $(PATCHTMP07))
PATCH_NUM = $(patsubst /ESE_RX27.0_R0%,%,  $(PATCHTMP08))

ifeq ($(TOOLSET), PSD_TGT_ICE)
TGT_DIR = tgt_ice
endif
ifeq ($(TOOLSET), PSD_TGT_MGD)
TGT_DIR = tgt_mgd
endif
ifeq ($(TOOLSET), PSD_TGT_C)
TGT_DIR = tgt
endif

ifndef ENDIAN_CONVERTER
PARENT_DIR = ../..
else
PARENT_DIR = ..
endif

SKIP_BUILD = FALSE

ifeq ($(TOOLSET), PSD_TGT_MGD)
ifeq ($(RELEASE_NUM), 27)

SKIP_BUILD = TRUE

endif
endif

TOOLSET = EPIC

MAKE_TARGET = programs

PSD = ksgre_tutorial

ADD_INLINE_FILES =

ADD_EFILES =

ADD_CFILES_HOST =

ADD_CFILES_TGT =

ADD_EFLAGS = -z

ADD_E_INCLUDES = -DEPIC_RELEASE_IS_$(RELEASE_NUM)x -I$(PARENT_DIR)/KSFoundation -I$(PARENT_DIR)/ksmodules

ADD_CFLAGS_HH =  -DEPIC_RELEASE=$(RELEASE_NUM) -DEPIC_PATCHNUM=$(PATCH_NUM) -DREV=\"$(GITREV)\" -I$(PARENT_DIR)/KSFoundation

ADD_CFLAGS_HS =  -DEPIC_RELEASE=$(RELEASE_NUM) -DEPIC_PATCHNUM=$(PATCH_NUM) -DREV=\"$(GITREV)\" -I$(PARENT_DIR)/KSFoundation

ADD_CFLAGS_TH =  -DEPIC_RELEASE=$(RELEASE_NUM) -DEPIC_PATCHNUM=$(PATCH_NUM) -DREV=\"$(GITREV)\" -I$(PARENT_DIR)/KSFoundation

ADD_CFLAGS_TS =  -DEPIC_RELEASE=$(RELEASE_NUM) -DEPIC_PATCHNUM=$(PATCH_NUM) -DREV=\"$(GITREV)\" -I$(PARENT_DIR)/KSFoundation

ADD_LINKFLAGS_HH = -L$(PARENT_DIR)/KSFoundation/$(RELEASE_NUM)/host

ADD_LINKFLAGS_HS = -L$(PARENT_DIR)/KSFoundation/$(RELEASE_NUM)/sim_linux

ADD_LINKFLAGS_TH = -L$(PARENT_DIR)/KSFoundation/$(RELEASE_NUM)/$(TGT_DIR)

ADD_LINKFLAGS_TS = -L$(PARENT_DIR)/KSFoundation/$(RELEASE_NUM)/sim_linux

ADD_LIBS_HH = -lKSFoundation_hh

ADD_LIBS_HS = -lKSFoundation_hs

ADD_LIBS_TH = -lKSFoundation_th

ADD_LIBS_TS = -lKSFoundation_ts

# --------------------------------------------------------------------
#
#  Rule: "UsePgenOnHost()"
#
#
#  This rule is empty for the GCC compiler set.  It is only used
#  by the Epic preprocessor.
#
# --------------------------------------------------------------------

# --------------------------------------------------------------------
#
#  Rule: "PsdParameters()"
#
#

VPATH = ..

#
#  Rule: "PsdSuffixRules()"
#

.SUFFIXES: .cpp .c .o-hh .o-hhts

CFLAGS_HH  = $(CFLAGS1_HH) $(DEFAULT_CFLAGS) $(CFLAGS2_HH)
CFLAGS_TS  = $(CFLAGS1_TS) $(DEFAULT_CFLAGS) $(CFLAGS2_TS)

.c.o-hh:
	$(RM) ${@F}
	 $(CC) -c -o ${@F} $< $(CFLAGS_HH) \
		 -UIMAKE_PSDSUFFIXRULES

.c.o-hhts:
	$(RM) ${@F}
	 $(CC) -c -o ${@F} $< $(CFLAGS_TS) \
		 -UIMAKE_PSDSUFFIXRULES

CXXFLAGS_HH  = $(CXXFLAGS1_HH) $(DEFAULT_CXXFLAGS) $(CXXFLAGS2_HH)
CXXFLAGS_TS  = $(CXXFLAGS1_TS) $(DEFAULT_CXXFLAGS) $(CXXFLAGS2_TS)

.cpp.o-hh:
	$(RM) ${@F}
	 $(CXX) -c -o ${@F} $< $(CXXFLAGS_HH) \
		-UIMAKE_PSDCPPSUFFIXRULES

.cpp.o-hhts:
	$(RM) ${@F}
	 $(CXX) -c -o ${@F} $< $(CXXFLAGS_TS) \
		-UIMAKE_PSDCPPSUFFIXRULES

clean::
	-$(RM) *.o-hh *.o-hhts

#
#  Rule: "StandardPsdParameters()"
#

hw-mgd:: hw

hw-ice:: hw

PSD_INCLUDES = \
	       -I.. \
	       -I$(TOP)/psd/include \
	       -I$(TOP)/psd/include/private \
	       -I$(TOP)/psd/include/private/support \
	       -I$(TOP)/psd/psdsource \
	       -I$(TOP)/lx/em/include \
	       -I$(TOP)/lx/include \
	       -I$(TOP)/host/foundation-libs/CnvEndianLib/host_static \
	       -I$(TOP)/host/include \
	       -I$(TOP)/mgd/include \
	       -I$(TOP)/vre/support \
	       -I$(GE_SYSROOT)/usr/include/libxml2 \
	       -I$(TOP)/mxutil/include

# Locking flag to modify CVs.
# Use -DMCVALL to allow all CVs to be modified.
M_CVS =

PSD_FLAGS    = \
	       $(M_CVS) \
	       $(EPLUS_CFLAGS)

HOST_FLAGS   = \
	       -DHOST_TGT \
	       -DMGD_IF

SIM_FLAGS    = \
	       -DERMES_DEBUG \
	       -DSIM \
	       -DSIM_IO

CFLAGS1_HH   = \
	       $(ADD_CFLAGS_HH) \
	       $(PSD_INCLUDES)

CFLAGS2_HH   = \
	       $(PSD_FLAGS) \
	       $(HOST_FLAGS) \
	       -DLX_ENBLpopup \
	       -DPSD_HW	\
	       -O2 \
	       -Wfloat-equal \
           -mfpmath=sse -msse2

PSD_LDFLAGS      = \
		   -L.. \
		   -L$(TOP)/psd/lib \
		   -L$(TOP)/mgd/lib/host

HOST_LINKDIRS    = \
		   -L$(TOP)/lx/lib \
		   -L$(TOP)/host/install/lib \
		   -L$(TOP)/host/lib

RECON_LINKDIRS   = \
                    -L$(BLITZ_ROOT)/lib

ENDIAN_LDFLAGS   = \
		   -lCnvEndianBase

HOST_EXTERN_LIBS = \
		   -lop_keyPortableC \
		   -lgemshid \
		   -L$(TOP)/mxutil/lib/host     -lAnatomyInfo

LDFLAGS1_HH      = \
		   $(ADD_LINKFLAGS_HH) \
		   $(PSD_LDFLAGS) \
		   $(HOST_LINKDIRS) \
		   $(RECON_LINKDIRS)

LDFLAGS2_HH      = \
		   $(EPLUS_LDFLAGS2) \
		   $(ADD_LIBS_HH) \
		   $(EPLUS_FEATURES_LIB_HH) \
		   $(DBDT_LIB_HH) \
		   -lpgen_on_host_hh \
		   -L$(TOP)/host/lib     -lBurstMode_static \
		   -lPURE_hh \
		   -lpsdsupport_hhts \
		   -lpulsegen_hh \
		   -lpsdsupport_hhts \
		   -lpsdipgsim_stubs_hh \
		   -lepic_main_hh \
		   -lepic_rt_hh \
		   -lpsdopt_hh \
		   -lpsdsupport_hh \
		   -lpsdcrucial_hh \
		   -lposlib_hh \
		   -lrfextfile_host \
		   -L$(FFTW_HOME)/lib     -lfftw3     -lfftw3f \
		   $(HOST_EXTERN_LIBS) \
		   -lrspsimrsp \
		   -lrspsimproc \
		   -lrspsimext \
		   -lrspsimdrv \
		   -lrspsimutil \
		   -lrspsimcommon \
		   -lSeqCfg \
		   -lpsdutil_hh \
		   $(ENDIAN_LDFLAGS) \
		   -lepic_cm_hh \
		   -lre_support_hh \
		   -L$(TOP)/host/lib     -lCrcClassC \
		   -L$(TOP)/host/lib     -ltime_profiler_client \
		   -L$(TOP)/host/lib     -llog_trace_service_client \
		   -L$(TOP)/host/lib     -luds_com \
		   -L$(TOP)/host/lib     -lhash_table_c \
		   -lxml2 \
		   -lz \
		   -ldl \
                   -L$(TOP)/mxutil/rxccfg/gemriutil/rxccfg/host_no_ace     -lrxccfg_no_ace     -L$(TOP)/mxutil/util/gemriutil/util/host_no_ace     -lgemriutil \
		   -L$(TOP)/psd/lib     -lposlib_hh     -L$(TOP)/host/lib     -llog_trace_service_client     -L$(TOP)/host/lib     -luds_com     -L$(TOP)/host/lib     -lhash_table_c     -L$(TOP)/recon/Hdf5/host32     -lGEHdf5     -L$(TOP)/recon/System/host32     -lSystem     $(BOOST_ROOT)/lib/libboost_date_time.a     $(BOOST_ROOT)/lib/libboost_program_options.a     $(BOOST_ROOT)/lib/libboost_filesystem.a     $(BOOST_ROOT)/lib/libboost_serialization.a     $(BOOST_ROOT)/lib/libboost_thread.a     $(BOOST_ROOT)/lib/libboost_system.a     $(BLITZ_ROOT)/lib/libblitz.a     -L$(HDF5_ROOT)/lib     -lh5tools     -lhdf5_cpp     -lhdf5     -pthread \
		   -lm

# --------------------------------------------------------------------
#
#  Rule: "Generate32BitCode()"
#

HW_OPTIONS = \
    $(HW32_OPTIONS)

ACE_ROOT      = $(ACE_32_ROOT)
ATLAS_ROOT    = $(ATLAS_32_ROOT)
BLITZ_ROOT    = $(BLITZ_32_ROOT)
BOOST_ROOT    = $(BOOST_32_ROOT)
FFTW_HOME     = $(FFTW_32_HOME)
FREETYPE_ROOT = $(FREETYPE_32_ROOT)
FVWM_ROOT     = $(FVWM_32_ROOT)
HDF5_ROOT     = $(HDF5_32_ROOT)
ITK_HOME      = $(ITK_32_HOME)
ITK49_HOME    = $(ITK49_32BIT_HOME)
MPICH2_HOME   = $(MPICH2_32_HOME)
ONEWIRE_HOME  = $(ONEWIRE_HOME_32)
SPRO_HOME     = $(SPRO_32_HOME)
TAO_ROOT      = $(TAO_32_ROOT)
XERCES_HOME   = $(XERCES_32_HOME)

# --------------------------------------------------------------------

# --------------------------------------------------------------------

ifeq ($(SKIP_BUILD), FALSE)

# --------------------------------------------------------------------
#
#  Rule: "BuildingEpicPsd()"
#
#

HH_C_OBJS = $(PSD).host.o-hh $(ADD_CFILES_HOST:.c=.o-hh)

HH_OBJS = $(HH_C_OBJS:.cpp=.o-hh)

#
#  Rule: "PsdLink()"
#

HH_EXE = $(PSD)

hw $(MAKE_TARGET)::  $(HH_EXE)

# --------------------------------------------------------------------
#
#  Rule: "LinkUsingCxx(LINKOBJ,OBJS,LDFLAGS1,LDFLAGS2)"
#
#
#  LINKOBJ: The name of the resultant object file for this rule.
#       It is created by linking together the files given by
#       OBJS (see next definition).
#
#  OBJS: A list of object files which are to be linked together.
#
#  LDFLAGS1: A list of flags to be passed to $(CXX).  These flags
#       are placed before any standard flags which may be defined.
#
#  LDFLAGS2: A list of flags to be passed to $(CXX).  These flags
#       are placed after any standard flags which may be defined.
#

all $(MAKE_TARGET):: $(HH_EXE)

$(HH_EXE): $(HH_OBJS)
	$(RM) $@
	$(CXX) -o $@ $(LDFLAGS1_HH) $(DEFAULT_LDFLAGS1) $? \
		$(DEFAULT_LDFLAGS2) $(LDFLAGS2_HH) -UIMAKE_LINKUSINGCXX

clean::
	$(RM) $(HH_EXE)

# --------------------------------------------------------------------

# --------------------------------------------------------------------
endif

CFLAGS2_HS += -O0 -Wno-float-equal
CFLAGS2_HH += -O0 -Wno-float-equal
CFLAGS2_TS += -O0 -Wno-float-equal
CFLAGS2_TH += -O0 -Wno-float-equal

# ====================================================================

#
#
#
#
#
#

# ====================================================================
#
#  This dependency line is found in all makefiles.  $(MAKE_TARGET)
#     should be defined in the local Imakefile.
#
# ====================================================================

all $(MAKE_TARGET):: $(ALL_OBJS)

# ====================================================================

